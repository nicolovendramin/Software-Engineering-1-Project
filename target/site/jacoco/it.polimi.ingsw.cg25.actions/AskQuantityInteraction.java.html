<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AskQuantityInteraction.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cg25</a> &gt; <a href="index.source.html" class="el_package">it.polimi.ingsw.cg25.actions</a> &gt; <span class="el_source">AskQuantityInteraction.java</span></div><h1>AskQuantityInteraction.java</h1><pre class="source lang-java linenums">package it.polimi.ingsw.cg25.actions;

import java.util.NoSuchElementException;
/**
 * 
 * @author nicolo
 *
 */
public class AskQuantityInteraction extends Interaction {

		/**
		 * Serial number for serialization
		 */
		private static final long serialVersionUID = -8897091257409742127L;
		/**
		 * the price of the product, -1 if not set yet
		 */
<span class="fc" id="L18">		private int price = -1;</span>
		/**
		 * the upper bound specifies the max number of objects the player
		 * wants to insert in a product
		 */
<span class="fc" id="L23">		private int upperBound=-1;</span>
		
		/**
		 * This constructor creates a default AskQuantityInteraction without upper bound and with
		 */
<span class="fc" id="L28">		public AskQuantityInteraction(){</span>
<span class="fc" id="L29">			super.setQuestion(&quot;Insert the amount&quot;);</span>
<span class="fc" id="L30">		}</span>
		
		/**
		 * This constructor builds the interaction with no upper bound and using the given message as question
		 * @param message is the question you want to set for the interaction
		 */
<span class="fc" id="L36">		public AskQuantityInteraction(String message){</span>
<span class="fc" id="L37">			this.upperBound = -1;</span>
<span class="fc" id="L38">			super.setQuestion(message);</span>
<span class="fc" id="L39">		}</span>
		
		/**
		 * This constructor build the interaction with a custom message and a limited upper bound for the reply
		 * @param message is the question you want to set for the interaction
		 * @param upperBound is the maximum quantity that can be registered as a reply
		 */
<span class="fc" id="L46">		public AskQuantityInteraction(String message, int upperBound){</span>
<span class="fc bfc" id="L47" title="All 2 branches covered.">			if(upperBound&lt;=0)</span>
<span class="fc" id="L48">				throw new IllegalArgumentException(&quot;The upper Bound must be at least greater than zero!&quot;);</span>
<span class="fc" id="L49">			this.upperBound = upperBound;</span>
<span class="fc" id="L50">			super.setQuestion(message);</span>
<span class="fc" id="L51">		}</span>
		
		/**
		 * This method never returns a negative element. If the reply has not been registered yet
		 * it throws a NoSuchElementException
		 * @return the reply to the askQuantityInteraction, if registered
		 * @throws NoSuchElementException if the reply has not been registered yet
		 */
		public int getReply(){
<span class="fc bfc" id="L60" title="All 2 branches covered.">			if(this.price&lt;0)</span>
<span class="fc" id="L61">				throw new NoSuchElementException(&quot;The reply has not been registered yet&quot;);</span>
<span class="fc" id="L62">			return this.price;</span>
		}
		
		/**
		 * In this interaction the reply is registered
		 */
		@Override
		public void registerReply(String reply) {
			try{
<span class="fc" id="L71">				int tempPrice = Integer.parseInt(reply);</span>
<span class="fc bfc" id="L72" title="All 2 branches covered.">				if(tempPrice&lt;0)</span>
<span class="fc" id="L73">					throw new IllegalArgumentException(&quot;The quantity must be major than zero&quot;);</span>
<span class="fc bfc" id="L74" title="All 4 branches covered.">				if(this.upperBound&gt;0 &amp;&amp; tempPrice &gt; this.upperBound)</span>
<span class="fc" id="L75">					throw new IllegalArgumentException(&quot;Too high. Fly down!&quot;);</span>
<span class="fc" id="L76">				this.price = tempPrice;</span>
<span class="fc" id="L77">			}catch(NumberFormatException e){</span>
<span class="fc" id="L78">				throw new IllegalArgumentException(&quot;You are asked to type a number&quot;,e);</span>
<span class="fc" id="L79">			}</span>
<span class="fc" id="L80">		}</span>

		
		@Override
		public int hashCode() {
<span class="fc" id="L85">			final int prime = 31;</span>
<span class="fc" id="L86">			int result = super.hashCode();</span>
<span class="fc" id="L87">			result = prime * result + upperBound;</span>
<span class="fc" id="L88">			return result;</span>
		}

		@Override
		public boolean equals(Object obj) {
<span class="fc bfc" id="L93" title="All 2 branches covered.">			if (this == obj)</span>
<span class="fc" id="L94">				return true;</span>
<span class="fc bfc" id="L95" title="All 2 branches covered.">			if (obj == null)</span>
<span class="fc" id="L96">				return false;</span>
<span class="fc bfc" id="L97" title="All 2 branches covered.">			if (getClass() != obj.getClass())</span>
<span class="fc" id="L98">				return false;</span>
<span class="fc" id="L99">			AskQuantityInteraction other = (AskQuantityInteraction) obj;</span>
<span class="fc bfc" id="L100" title="All 2 branches covered.">			if (upperBound != other.upperBound)</span>
<span class="fc" id="L101">				return false;</span>
<span class="fc" id="L102">			return true;</span>

		}

		@Override
		public void registerReply(Interaction i) {
<span class="pc bpc" id="L108" title="1 of 4 branches missed.">			if(i == null || !i.equals(this))</span>
<span class="fc" id="L109">				throw new IllegalArgumentException();</span>
			else
			{
<span class="fc" id="L112">				AskQuantityInteraction casted = (AskQuantityInteraction)i;</span>
<span class="fc" id="L113">				this.price = casted.price;</span>
			}
<span class="fc" id="L115">		}</span>

		@Override
		public String printOptions() {
<span class="fc" id="L119">			return this.getQuestion();</span>
		}
		
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>